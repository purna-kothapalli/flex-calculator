<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <title>‚ö° Flexi Payout by % + Auto Ranks</title>
    <style>
        body {
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  padding: 30px;
  max-width: 900px;
  margin: auto;
  background-color: #f4f7fa;
  color: #333;
}

h2, h3 {
  color: #2c3e50;
}

input, button {
  padding: 10px;
  margin: 5px 0;
  font-size: 16px;
  border: 1px solid #ccc;
  border-radius: 6px;
  outline: none;
}

input:focus {
  border-color: #3498db;
}

button {
  background-color: #3498db;
  color: white;
  border: none;
  cursor: pointer;
  margin-right: 10px;
  transition: background-color 0.2s ease;
  border-radius: 6px;
}

button:hover {
  background-color: #2980b9;
}

button:active {
  transform: scale(0.98);
}

label {
  display: block;
  margin-top: 15px;
  font-weight: 600;
}

.slab-container {
  margin-top: 15px;
  padding: 10px;
  background-color: #ecf0f1;
  border: 1px solid #ccc;
  border-radius: 6px;
}

.slab-row {
  display: flex;
  gap: 10px;
  margin-bottom: 10px;
  flex-wrap: wrap;
  align-items: center;
}

.slab-row input {
  width: 130px;
  flex: 1 1 130px;
}

.slab-row button {
  background-color: #fbf8f8;
  font-weight: bold;
  color: white;
  transition: background-color 0.2s ease;
}

.slab-row button:hover {
  background-color: #f7f3f3;
}


.results {
  font-family: 'Courier New', Courier, monospace;
  white-space: pre-wrap;
  background: #fff;
  padding: 15px;
  border: 1px solid #bbb;
  border-radius: 6px;
  margin-top: 25px;
  max-height: 500px;
  overflow-y: auto;
  box-shadow: 0 2px 6px rgba(0,0,0,0.1);
}

    </style>
</head>

<body>

    <h2>üéØ Flexi Payout Calculator</h2>
    <label>Entry Fee (‚Çπ):</label><br>
    <input type="number" id="entryFee" placeholder="e.g. 10"><br>

    <label>Number of Users Joined:</label><br>
    <input type="number" id="joinedUsers" placeholder="e.g. 500"><br>
    <label>Users per Rank (e.g. 3):</label><br>
    <input type="number" id="usersPerRank" placeholder="e.g. 3"><br>

    <label>Total Prize Pool % (e.g. 90):</label><br>
    <input type="number" id="prizePercent" placeholder="e.g. 90"><br>

    <h3>üèÜ Define Rank Slabs (Slab gets % of total pool)</h3>
    <div id="slabContainer" class="slab-container"></div>
    <button onclick="addSlab()">‚ûï Add Slab</button>
    <button onclick="calculate()">‚úÖ Calculate</button>

    <div class="results" id="output"></div>

    <script>
        function addSlab() {
            const container = document.getElementById('slabContainer');
            const row = document.createElement('div');
            row.className = 'slab-row';

            row.innerHTML = `
        <input type="number" placeholder="Start Rank" class="startRank" />
        <input type="number" placeholder="End Rank" class="endRank" />
        <input type="number" placeholder="Prize/User ‚Çπ" class="userPrize" />

        <button onclick="this.parentElement.remove()">‚ùå</button>
      `;

            container.appendChild(row);
        }

        function calculate() {
  const entryFee = parseFloat(document.getElementById('entryFee').value);
  const joinedUsers = parseInt(document.getElementById('joinedUsers').value);
  const prizePercent = parseFloat(document.getElementById('prizePercent').value);
  const usersPerRank = parseInt(document.getElementById('usersPerRank').value);

  if (
    isNaN(entryFee) || entryFee <= 0 ||
    isNaN(joinedUsers) || joinedUsers <= 0 ||
    isNaN(prizePercent) || prizePercent <= 0 || prizePercent > 100 ||
    isNaN(usersPerRank) || usersPerRank <= 0
  ) {
    alert("Please enter valid inputs.");
    return;
  }

  const totalCollection = entryFee * joinedUsers;
  const prizePool = (prizePercent / 100) * totalCollection;
  const maxRanks = Math.floor(joinedUsers / usersPerRank);

  const slabRows = document.querySelectorAll('.slab-row');
  let baseRanks = [];
  let totalPrizeUsed = 0;

  for (let row of slabRows) {
    const start = parseInt(row.querySelector('.startRank').value);
    const end = parseInt(row.querySelector('.endRank').value);
    const prizePerUser = parseFloat(row.querySelector('.userPrize').value);

    if (
      isNaN(start) || isNaN(end) || isNaN(prizePerUser) ||
      start <= 0 || end < start || prizePerUser <= 0
    ) {
      alert("Please check your slab inputs.");
      return;
    }

    const numRanks = end - start + 1;

    for (let i = start; i <= end; i++) {
      if (i > joinedUsers) break;
      baseRanks.push({ rank: i, prize: prizePerUser });
      totalPrizeUsed += prizePerUser;
    }
  }

  baseRanks = baseRanks.slice(0, maxRanks);

  if (baseRanks.length === 0) {
    alert(`No valid ranks ‚Äî only ${joinedUsers} users joined.`);
    return;
  }

  if (totalPrizeUsed > prizePool) {
    alert(`‚ö†Ô∏è Total Prize Used (‚Çπ${totalPrizeUsed.toFixed(2)}) exceeds Prize Pool (‚Çπ${prizePool.toFixed(2)}).`);
    return;
  }

  let output = `üéüÔ∏è Entry Fee: ‚Çπ${entryFee}\nüë• Joined Users: ${joinedUsers}\nüìä Prize Pool %: ${prizePercent}%\nüèÜ Max Ranks Paid: ${maxRanks}\nüí∞ Total Collection: ‚Çπ${totalCollection.toFixed(2)}\nüéÅ Prize Pool Used: ‚Çπ${totalPrizeUsed.toFixed(2)}\n\nüìà Rank-wise Payouts:\n`;

  baseRanks.forEach(r => {
    output += `Rank ${r.rank}: ‚Çπ${r.prize.toFixed(2)}\n`;
  });

  document.getElementById('output').innerHTML = output;
}

    </script>

</body>

</html>